/*
 * onboard_diode_task.c
 *
 *  Created on: Mar 4, 2024
 *      Author: Michal Klebokowski
 */

#include "onboard_diode_task.h"
/* FreeRTOS includes */
#include "FreeRTOS.h"
#include "task.h"
/* HAL */
#include "gpio.h"


OnboardDiode_state_t DiodeActualState;
uint16_t NormalBlinkDelay;
uint16_t ShortBlinkOnTime;
uint16_t ShortBlinkOffTime;

void vTaskOnboardDiode(void *pvParameters)
{

	for(;;)
	{
		switch(DiodeActualState)
		{
		case DIODE_NORMAL_BLINK:
			HAL_GPIO_TogglePin(LED_GPIO_Port, LED_Pin);
			vTaskDelay(NormalBlinkDelay);
			break;

		case DIODE_SHORT_BLINK:
			HAL_GPIO_WritePin(LED_GPIO_Port, LED_Pin, GPIO_PIN_SET);
			vTaskDelay(ShortBlinkOnTime);
			HAL_GPIO_WritePin(LED_GPIO_Port, LED_Pin, GPIO_PIN_RESET);
			vTaskDelay(ShortBlinkOffTime);
			break;
		default:
			break;
		}
	}
}




